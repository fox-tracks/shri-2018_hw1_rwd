"use strict";!function(){function e(e,t){if(Hls.isSupported()){const o=new Hls;o.loadSource(t),o.attachMedia(e),o.on(Hls.Events.MANIFEST_PARSED,function(){e.play()})}else e.canPlayType("application/vnd.apple.mpegurl")&&(e.src=t,e.addEventListener("loadedmetadata",function(){e.play()}))}function t(e){let t;switch(e.dataset.key){case"1":t="sosed";break;case"2":t="cat";break;case"3":t="dog";break;case"4":t="hall";break;default:t=""}return t}const o=Array.from(document.querySelectorAll(".card__video"));let a,l;o.forEach(o=>{const a=t(o);console.log(a),e(o,`http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2F${a}%2Fmaster.m3u8`)});const c=document.querySelector(".page__popup"),s=document.querySelector(".page"),r=document.querySelector(".popup__back-btn"),n=document.querySelector(".popup__control-wrap");o.forEach(i=>{i.addEventListener("click",i=>{c.style.display="block",s.style.overflow="hidden",o.forEach(e=>{e.pause()});const d=i.target.cloneNode(!0);console.log(i.parentNode);const p=Math.floor(100*i.pageX/s.clientWidth-50),u=Math.floor(100*i.pageY/s.clientHeight-50),_=i.target.getBoundingClientRect().height/s.clientHeight;console.log("rate",_),c.insertBefore(d,c.firstChild);const f=t(i.target);e(l=c.querySelector(".card__video"),`http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2F${f}%2Fmaster.m3u8`),l.style.transform=`translate(${p}%, ${u}%) scale(${_})`,a=`translate(${p}%, ${u}%) scale(${_})`,setTimeout(function(){d.classList.add("popup__video_full")},0),setTimeout(function(){r.classList.add("popup__back-btn_active"),n.classList.add("popup__back-btn_active")},0),l.style.filter="brightness(50%)"})}),r.addEventListener("click",()=>{c.querySelector(".card__video").classList.remove("popup__video_full"),l.style.transform=a,o.forEach(e=>{e.play()}),setTimeout(function(){c.style.display="none",c.querySelector(".card__video").remove()},5e3)})}();