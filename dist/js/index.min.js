"use strict";function initCameraGesture(){const e=100,t=35,n=0,a=200,r=document.querySelector(".camera"),i=document.querySelector(".camera__zoom-value"),s=document.querySelector(".camera__brightness-value"),o=document.querySelector(".camera__scroll"),c=r.getBoundingClientRect().width;let l,d,u,p,_=50,m=178,g=+getComputedStyle(r).getPropertyValue("background-size").slice(0,-1),h=+getComputedStyle(r).getPropertyValue("background-position-x").split("px")[0]||0,v=+getComputedStyle(r).getPropertyValue("background-position-y").split("px")[0]||0,y=null,b=new Array,f=new Array,w={x:0,y:0};function x(e,t,n){return e<=t?t:e>=n?n:e}function L(e){for(let t=0;t<f.length;t++)if(f[t].pointerId===e.pointerId){f.splice(t,1);break}!function(e){for(let t=0;t<b.length;t++)if(b[t].id===e.pointerId){b.splice(t,1);break}}(e),b.length<2&&(w.x=0,g=+getComputedStyle(r).getPropertyValue("background-size").slice(0,-1))}r.style.touchAction="none",r.setAttribute("touch-action","none"),r.addEventListener("pointerdown",function(e){r.setPointerCapture(e.pointerId),f.push(e),console.log("commonCache",f),y={id:e.pointerId,startX:e.x,startY:e.y,startPositionX:h,startPositionY:v},b.push(y),2===b.length&&(w.x=b[1].startX-b[0].startX)}),r.addEventListener("pointermove",function(v){for(let e=0;e<f.length;e++)v.pointerId===f[e].pointerId&&(f[e]=v);if(function(e){if(2!==e.length)return l=void 0,void(d=void 0);const[t,i]=e,o=function(e,t){let n=e.x-t.x,a=e.y-t.y;return Math.atan2(a,n)*(180/Math.PI)}(t,i);if(void 0===l)l=o,d=_;else{const e=o-l,t=d+e,i=x(Math.abs(t),n,a);!function(e){_=e;const t=Math.round(e)+"%";s.innerHTML=t,r.style.filter="brightness("+t+")"}(i)}}(f),function(n){if(2!==n.length)return u=void 0,void(p=void 0);const[a,s]=n,o=function(e,t){return e.x-t.x}(a,s);if(void 0===u)u=Math.abs(o),p=m;else{const n=Math.abs(o)-u,a=p+n*e/c,s=x(a,t+e,1/0);m=l=s,i.innerHTML=Math.round(l-e)+"%",r.style.backgroundSize=l+"%"}var l}(f),b.length<2){if(!y)return;const{startX:t,startPositionX:n}=y,{x:a}=v,i=a-t,s=c*g/e,l=c/(s-c);n+i>=0?(r.style.backgroundPositionX="0px",h=0,o.style.left=0):n+i<0&&Math.abs(n+i)>=s-c?(r.style.backgroundPositionX="-"+(s-c).toString()+"px",h=-(s-c),o.style.left=c-o.getBoundingClientRect().width+"px"):(r.style.backgroundPositionX=n+i+"px",h=n+i,o.style.left=Math.abs(n+i)*l+"px")}}),r.addEventListener("pointerup",L),r.addEventListener("pointercancel",L),r.addEventListener("pointerout",L),r.addEventListener("pointerleave",L)}setTimeout(initCameraGesture,0),function(){const e=window.data,t=document.querySelector("template").content.querySelector("article.event-feed__card"),n=document.querySelector(".event-feed__wrapper");function a(e){const n=document.createDocumentFragment();return e.forEach(e=>{const a=function(e,t){const n=e.cloneNode(!0),{icon:a}=t,r=n.querySelector("div.card__extra-content");if(n.classList.add("card_icon_"+a),n.classList.add("card_size_"+t.size),n.classList.add("event-feed__card_size_"+t.size),n.classList.add("card_action_"+t.type),n.querySelector("h3.card__title").textContent=t.title,n.querySelector("p.card__source").textContent=t.source,n.querySelector("p.card__time").textContent=t.time,null!==t.description){let e=document.createElement("div");e.classList.add("card__description"),e.textContent=t.description,r.appendChild(e)}else r.style.display="none";if(t.hasOwnProperty("data")){let e=document.createElement("div");e.classList.add("card__widget"),e.classList.add("widget");const{data:n}=t;switch(a){case"stats":e.innerHTML=function(){const e=["Richdata@1x.png","Richdata@2x.png","Richdata@3x.png"].map(e=>{const t=[];return t.push("img/"+e),t});return`<div class="widget__wrap widget__wrap_graph">\n                <img class="widget__wrap_graph-img" src="${e[0]}" srcset="${e[1]} 2x, ${e[2]} 3x" width="100%" height="100%" alt="Графики">\n            </div>`}();break;case"thermal":e.innerHTML=function(e){const{temperature:t,humidity:n}=e;return`<div class="widget__wrap climate">\n        <div class="climate__temperature">Температура: <span class="climate__temperature-value">${t} С</span></div>\n        <div class="climate__humidity">Влажность : <span class="climate__humidity-value">${n}%</span></div>\n      </div>`}(n);break;case"music":e.innerHTML=function(e){const{albumcover:t,artist:n,volume:a}=e,{name:r,length:i}=e.track;return`<div class="widget__wrap player">\n        <img class="player__album-cover" src="${t}" width="52px" height="53px" alt="Florence & The Machine">\n        <div class="player__track-info">\n            <span class="player__track-name">${n} - ${r}</span>\n        </div>\n        <input class="player__track-bar" type="range" value="31" min="0" max="271">\n        <span class="player__track-length">${i}</span>\n        <button class="player__back-btn"></button>\n        <button class="player__next-btn"></button>\n        <input class="player__volume-bar" type="range" value="${a}" min="0" max="100">\n        <span class="player__volume-value">${a}%</span>\n  </div>`}(n);break;case"fridge":e.innerHTML=function(e){const{buttons:t}=e;return`<div class="widget__wrap dialogue">\n        <button class="dialogue__btn dialogue__btn_agree">${t[0]}</button>\n        <button class="dialogue__btn dialogue__btn_cancel">${t[1]}</button>\n      </div>`}(n);break;case"cam":e.innerHTML='<div class="widget__wrap widget__wrap_cam camera"><div class="camera__scroll"></div></div>\n            <div class="camera__controls"> \n                <p class="camera__zoom">Приближение: <span class="camera__zoom-value">78%</span></p>\n                <p class="camera__brightness">Яркость: <span class="camera__brightness-value">50%</span></p>\n            </div>'}r.appendChild(e)}return n}(t,e);n.appendChild(a)}),n}(function(e){const t=a(e);n.appendChild(t)})(e)}(),function(){const e="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0,t=document.querySelector(".event-feed__wrapper");e||t.classList.add("event-feed-not-touchscreen")}(),function(){const e=document.querySelector(".hamburger-btn"),t=document.querySelector(".header__nav");e.addEventListener("click",()=>{t.classList.toggle("header__nav_state_shown"),e.classList.toggle("hamburger-btn_action_close")})}();