"use strict";function initCameraGesture(){const t=100,e=135,n=document.querySelector(".camera"),a=document.querySelector(".camera__zoom-value"),r=document.querySelector(".camera__brightness-value"),i=document.querySelector(".camera__scroll"),s=n.getBoundingClientRect().width;let c,o,l=50,d=+getComputedStyle(n).getPropertyValue("background-size").slice(0,-1),u=+getComputedStyle(n).getPropertyValue("background-position-x").split("px")[0]||0,p=+getComputedStyle(n).getPropertyValue("background-position-y").split("px")[0]||0,_=null,m=new Array,g=new Array,h={x:0,y:0};function v(e){for(let t=0;t<g.length;t++)if(g[t].pointerId===e.pointerId){g.splice(t,1);break}!function(t){for(let e=0;e<m.length;e++)if(m[e].id===t.pointerId){m.splice(e,1);break}}(e),m.length<2&&(h.x=0,d=+getComputedStyle(n).getPropertyValue("background-size").slice(0,-1),a.innerHTML=Math.round(d-t)+"%")}n.style.touchAction="none",n.setAttribute("touch-action","none"),n.addEventListener("pointerdown",function(t){n.setPointerCapture(t.pointerId),g.push(t),_={id:t.pointerId,startX:t.x,startY:t.y,startPositionX:u,startPositionY:p},m.push(_),2===m.length&&(h.x=m[1].startX-m[0].startX)}),n.addEventListener("pointermove",function(a){for(let t=0;t<g.length;t++)a.pointerId===g[t].pointerId&&(g[t]=a);if(function(t){if(2!==t.length)return c=void 0,void(o=void 0);const[e,a]=t,i=function(t,e){let n=t.x-e.x,a=t.y-e.y;return Math.atan2(a,n)*(180/Math.PI)}(e,a);if(void 0===c)c=i,o=l;else{const t=i-c,e=o+t,a=(u=200,(s=e)<=(d=0)?d:s>=u?u:s);!function(t){l=t;const e=Math.round(t)+"%";r.innerHTML=e,n.style.filter="brightness("+e+")"}(a)}var s,d,u}(g),2===m.length){for(let t=0;t<m.length;t++)if(a.pointerId===m[t].id){m[t].startX=a.x,m[t].startY=a.y;break}let r,i,c={};c.x=m[1].startX-m[0].startX,c.y=m[1].startY-m[0].startY,Math.abs(h.x)>0&&(r=(Math.abs(c.x)-Math.abs(h.x))*t/s,i=d+r<e?e:d+r,n.style.backgroundSize=i+"%"),h.x=c.x,d=i}if(m.length<2){if(!_)return;const{startX:e,startPositionX:r}=_,{x:c}=a,o=c-e,l=s*d/t,p=s/(l-s);r+o>=0?(n.style.backgroundPositionX="0px",u=0,i.style.left=0):r+o<0&&Math.abs(r+o)>=l-s?(n.style.backgroundPositionX="-"+(l-s).toString()+"px",u=-(l-s),i.style.left=s-i.getBoundingClientRect().width+"px"):(n.style.backgroundPositionX=r+o+"px",u=r+o,i.style.left=Math.abs(r+o)*p+"px")}}),n.addEventListener("pointerup",v),n.addEventListener("pointercancel",v),n.addEventListener("pointerout",v),n.addEventListener("pointerleave",v)}setTimeout(initCameraGesture,0),function(){const t=window.data,e=document.querySelector("template").content.querySelector("article.event-feed__card"),n=document.querySelector(".event-feed__wrapper");function a(t){const n=document.createDocumentFragment();return t.forEach(t=>{const a=function(t,e){const n=t.cloneNode(!0),{icon:a}=e,r=n.querySelector("div.card__extra-content");if(n.classList.add("card_icon_"+a),n.classList.add("card_size_"+e.size),n.classList.add("event-feed__card_size_"+e.size),n.classList.add("card_action_"+e.type),n.querySelector("h3.card__title").textContent=e.title,n.querySelector("p.card__source").textContent=e.source,n.querySelector("p.card__time").textContent=e.time,null!==e.description){let t=document.createElement("div");t.classList.add("card__description"),t.textContent=e.description,r.appendChild(t)}else r.style.display="none";if(e.hasOwnProperty("data")){let t=document.createElement("div");t.classList.add("card__widget"),t.classList.add("widget");const{data:n}=e;switch(a){case"stats":t.innerHTML=function(){const t=["Richdata@1x.png","Richdata@2x.png","Richdata@3x.png"].map(t=>{const e=[];return e.push("img/"+t),e});return`<div class="widget__wrap widget__wrap_graph">\n                <img class="widget__wrap_graph-img" src="${t[0]}" srcset="${t[1]} 2x, ${t[2]} 3x" width="100%" height="100%" alt="Графики">\n            </div>`}();break;case"thermal":t.innerHTML=function(t){const{temperature:e,humidity:n}=t;return`<div class="widget__wrap climate">\n        <div class="climate__temperature">Температура: <span class="climate__temperature-value">${e} С</span></div>\n        <div class="climate__humidity">Влажность : <span class="climate__humidity-value">${n}%</span></div>\n      </div>`}(n);break;case"music":t.innerHTML=function(t){const{albumcover:e,artist:n,volume:a}=t,{name:r,length:i}=t.track;return`<div class="widget__wrap player">\n        <img class="player__album-cover" src="${e}" width="52px" height="53px" alt="Florence & The Machine">\n        <div class="player__track-info">\n            <span class="player__track-name">${n} - ${r}</span>\n        </div>\n        <input class="player__track-bar" type="range" value="31" min="0" max="271">\n        <span class="player__track-length">${i}</span>\n        <button class="player__back-btn"></button>\n        <button class="player__next-btn"></button>\n        <input class="player__volume-bar" type="range" value="${a}" min="0" max="100">\n        <span class="player__volume-value">${a}%</span>\n  </div>`}(n);break;case"fridge":t.innerHTML=function(t){const{buttons:e}=t;return`<div class="widget__wrap dialogue">\n        <button class="dialogue__btn dialogue__btn_agree">${e[0]}</button>\n        <button class="dialogue__btn dialogue__btn_cancel">${e[1]}</button>\n      </div>`}(n);break;case"cam":t.innerHTML='<div class="widget__wrap widget__wrap_cam camera"><div class="camera__scroll"></div></div>\n            <div class="camera__controls"> \n                <p class="camera__zoom">Приближение: <span class="camera__zoom-value">78%</span></p>\n                <p class="camera__brightness">Яркость: <span class="camera__brightness-value">50%</span></p>\n            </div>'}r.appendChild(t)}return n}(e,t);n.appendChild(a)}),n}(function(t){const e=a(t);n.appendChild(e)})(t)}(),function(){const t="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0,e=document.querySelector(".event-feed__wrapper");t||e.classList.add("event-feed-not-touchscreen")}(),function(){const t=document.querySelector(".hamburger-btn"),e=document.querySelector(".header__nav");t.addEventListener("click",()=>{e.classList.toggle("header__nav_state_shown"),t.classList.toggle("hamburger-btn_action_close")})}();